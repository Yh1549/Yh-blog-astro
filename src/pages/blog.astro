---
// import {collections} from "../posts/config"
import { getCollection } from "astro:content";
import Layout from "../layouts/Layout.astro";

const pageTitle = "blog";
const posts = await Astro.glob("../content/blog/*.md");

const allBlog = await getCollection("blog");
const featured = allBlog.filter((post) => post.data.featured == "true");
---

<Layout title={pageTitle}>
  <main>
    <h1>My Astro Learning Blog</h1>
    <p>This is where I will post about my journey learning Astro.</p>
    <div>
      {
        featured.map((post) => (
          <>
            <a class="btn" href={`/${post.slug}`}>
              click to {post.slug}
            </a>
          </>
        ))
      }
    </div>
    <div>
      {
        posts.map((post) => (
          <>
            <p>front</p>
            <p>{post.frontmatter.slug}</p>
          </>
        ))
      }
    </div>
  </main>
</Layout>
